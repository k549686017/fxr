"use strict";var _createClass=function(){function n(o,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}return function(o,e,t){return e&&n(o.prototype,e),t&&n(o,t),o}}();function _classCallCheck(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}var og=document.getElementById("gouye");og.onclick=function(){getCookie("news")?window.location.href="car.html":window.location.href="login.html"};var Goods=function(){function e(o){_classCallCheck(this,e),this.cont=o.cont,this.url=o.url,this.load(),this.addEvent(),this.gouWuche()}return _createClass(e,[{key:"load",value:function(){var e=this;ajaxGet(this.url,function(o){e.res=JSON.parse(o),e.display()})}},{key:"display",value:function(){var e="";this.res.forEach(function(o){e+='<div class="box" index="'+o.goodsId+'">\n                        <img src="'+o.src+'">\n                        <span>'+o.price+"</span>\n                        <p>"+o.name+"</p>\n                        <em>加入购物车</em>\n                    </div>"}),this.cont.innerHTML=e}},{key:"addEvent",value:function(){var n=this;this.cont.addEventListener("click",function(o){if(getCookie("news")){var e=o||window.event,t=e.target||e.srcElement;"EM"==t.nodeName&&(n.id=t.parentNode.getAttribute("index"),n.setGoods())}else window.location.href="login.html"})}},{key:"gouWuche",value:function(){this.og=document.getElementById("gouye"),this.og.onclick=function(){getCookie("news")?window.location.href="car.html":window.location.href="login.html"}}},{key:"setGoods",value:function(){if(this.goods=""===getCookie("goods")?[]:JSON.parse(getCookie("goods")),this.goods.length<1)this.goods.push({id:this.id,num:1});else{for(var o=!0,e=0;e<this.goods.length;e++)if(this.goods[e].id===this.id){this.goods[e].num++,o=!1;break}o&&this.goods.push({id:this.id,num:1})}setCookie("goods",JSON.stringify(this.goods))}}]),e}();new Goods({cont:document.getElementById("cont"),url:"data.json"});